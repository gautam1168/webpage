<meta charset="UTF-8">
<html>
<head>
<title>Test Agents</title>
	<script src="../d3.js" type="text/javascript"></script>
	<script src="//d3js.org/d3.v3.min.js" charset="utf-8"></script>
	<script src="./agentstest.js"></script>

	<meta charset = "utf-8">
    <meta http-equiv = "X-UA-Compatible" content = "IE = edge">
	<meta name = "viewport" content = "width = device-width, initial-scale = 1">

    <!-- Bootstrap -->
    <link href = "//maxcdn.bootstrapcdn.com/bootstrap/3.3.1/css/bootstrap.min.css" rel = "stylesheet">
	<link href='https://fonts.googleapis.com/css?family=Noto+Serif' rel='stylesheet' type='text/css'>
	<link rel="stylesheet" href="./appstyle.css">
</head>

<body>
	<div class="container">
		<div class="jumbotron" style="background:url('background.jpg');">
			<h1 style="color:white">AIMAcode</h1>
			<p style="color:white">Artificial Intelligence: A modern approach</p>
		</div>
	</div>
	<nav class="navbar navbar-default" role="navigation">
		<div class="navbar-header">
			<botton type="button" class="navbar-toggle"
			data-toggle="collapse" data-target="#demotypenavbar">
				<span class="icon-bar"></span>
				<span class="icon-bar"></span>
				<span class="icon-bar"></span>
			</button>
		</div>

		<div class="collapse navbar-collapse" id="demotypenavbar">
		<ul class="nav navbar-nav">
			<li class="active"><a href="#">Agents</a></li>
			<li><a href="#">NLP</a></li>
			<li><a href="#">Search</a></li>
		</ul>
		</div>
	</nav>
	<div class="col-sm-10 col-sm-offset-1" id="worksheet">
		<div class="container">
			<h1>Trivial Vacuum Agent</h1>
		</div>
		<div class="container">
			<p>A trivial vacuum agent works in a simple world of two cells
			according to rules specified by a table.</p>
			<div id="trivialVac" class="viewbox"></div>
			<div>
				<button type="button" id="trivialVacStep" class="btn btn-primary"> Step </button>
				<button type="button" id="trivialVacRefresh" class="btn btn-secondary"> Refresh </button>
			</div>
		</div>
		<div class="container">
			<div id="performanceChart" ></div>
		</div>
	</div>
	<script>
		var env2 = new TrivialVacuumEnvironment(500, 350);
		elem = document.getElementById("trivialVac");
		env2.Render(elem);
		var smith = TableDrivenVacuumAgent();
		env2.AddThing(smith, [1,0]);
		btn = document.getElementById("trivialVacStep");
		btn.addEventListener("click", function(){
													env2.Step();
													console.log(smith.performance);
												},
							false);

		btn = document.getElementById("trivialVacRefresh");
		btn.addEventListener("click", function(){env2.ExogenousChange();}, false);

		/*d3 chart*/
		var dataset = [20,30,50,20,10], w=500, h=250, barpadding=1;
		var chart = d3.select("#performanceChart")
		  .append('svg')
		  .attr('width', w)
		  .attr('height', h);

		var pad = 40;

		var yscale = d3.scale.linear()
							.domain([0,d3.max(dataset)+pad])
							.range([h,0]);

		var xscale = d3.scale.linear()
							 .domain([0, dataset.length])
							 .range([0, w]);

		var yaxis = d3.svg.axis()
						  .scale(yscale)
						  .orient("left");

		var xaxis = d3.svg.axis()
						  .scale(xscale)
						  .orient("bottom");

		chart.selectAll('rect')
			 .data(dataset)
			 .enter()
			 .append('rect')
			 .attr('x', function(d,i){return i*(w/dataset.length)+pad;})
			 .attr('y', function(d){return h-yscale(d)-pad;})
			 .attr('width', w/dataset.length - barpadding)
			 .attr('height', function(d){return yscale(d);})
			 .attr('fill', '#427795');

		chart.selectAll('text')
			 .data(dataset)
			 .enter()
			 .append('text')
			 .text(function(d){return d;})
			 .attr('x', function(d, i){return i*(w/dataset.length) +
				 								(0.4*w/dataset.length);})
			 .attr('y', function(d){return h ;})
			 .attr('fill', 'white');

		chart.append("g")
			 .attr('transform', 'translate('+pad+', -'+pad+')')
			 .attr('class', 'axis')
			 .call(yaxis);

		chart.append("g")
			 .attr('transform', 'translate('+pad+','+(h-pad)+')')
			 .attr('class', 'axis')
			 .call(xaxis);
	</script>

	<!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
    <script src = "https://ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script>

    <!-- Include all compiled plugins (below), or include individual files as needed -->
    <script src = "//maxcdn.bootstrapcdn.com/bootstrap/3.3.1/js/bootstrap.min.js"></script>
</body>
</html>
